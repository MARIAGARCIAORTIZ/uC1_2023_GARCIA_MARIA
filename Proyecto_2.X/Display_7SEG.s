;--------------------------------
    ;@file    P2-Display_7SEG
    ;@brief   conteo de 0 a 7 cuando el boton esta normal y de A a F cuando lo pulsan
    ;@date    14/01/2023
    ;@author  MARIA DEL CARMEN GARCIA
    ; @Version and program:	MPLAB X IDE v6.00
;--------------------------------
#include "bit_configure.inc" //config statements should precede project file includes./
#include <xc.inc>
#include "Retardos.inc"

PSECT PROYECTO_2,class=CODE,reloc=2
PROYECTO_2:
    goto Main
    
PSECT CODE
 
Main:
    CALL Config_OSC,1; LLAMAMOS a Config_OSC
    CALL Pulsador; ""
    CALL Display;"
    CALL Loop
    NOP
Loop:		;(precionado)
    BTFSS PORTA,3,1; 
    goto Letras_A_F
    
 Numeros_0_9:
//NUMERO 0
     ;ENCIENDE EL SEGMENTO a
	BCF TRISD,0,0 
	BCF LATD,0,0
	
     ;ENCIENDE EL SEGMENTO b
	BCF TRISD,1,0
	BCF LATD,1,0
	
    ;ENCIENDE EL SEGMENTO c
	BCF TRISD,2,0
	BCF LATD,2,0
    
     ;ENCIENDE EL SEGMENTO d
	BCF TRISD,3,0
	BCF LATD,3,0
	
     ;ENCIENDE EL SEGMENTO e
	BCF TRISD,4,0
	BCF LATD,4,0
    
     ;ENCIENDE EL SEGMENTO f
	BCF TRISD,5,0
	BCF LATD,5,0
    
     ;APAGADO EL SEGMENTO g
	BCF TRISD,6,0
	BSF LATD,6,0
    
     ;APAGADO EL SEGMENTO dp	
	BCF TRISD,7,0
	BSF LATD,7,0
     BTFSS PORTA,3,1; verificar si está precionado o no 
     goto Letras_A_F; está precionado 
    
     ;RETARDOS 
     CALL Delay_250ms,1; si no está precionado
     CALL Delay_250ms,1;"
     CALL Delay_250ms,1;"
     CALL Delay_250ms,1;"
     
//NUMERO 1
     ;APAGADO SEGMENTO a
	BCF TRISD,0,0
	BSF LATD,0,0
	
     ;PRENDIDO SEGMENTO b
	BCF TRISD,1,0
	BCF LATD,1,0
	
     ;PRENDIDO SEGMENTO c
	BCF TRISD,2,0
	BCF LATD,2,0
	
     ;APAGADO SEGMENTO d
	BCF TRISD,3,0
	BSF LATD,3,0
	
     ;APAGADO SEGMENTO e
	BCF TRISD,4,0
	BSF LATD,4,0
	
     ;APAGADO SEGMENTO f
	BCF TRISD,5,0
	BSF LATD,5,0
	
     ;APAGADO SEGMENTO d
	BCF TRISD,6,0
	BSF LATD,6,0
	
     ;APAGADO SEGMENTO g	
	BCF TRISD,7,0
	BSF LATD,7,0
	
     ;APAGADO SEGMENTO dp
	BTFSS PORTA,3,1
	goto Letras_A_F
	
     ;RETADO
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	
//NUMERO 2	
     ;PRENDIDO SEGMENTO a
	BCF TRISD,0,0
	BCF LATD,0,0
	
     ;PRENDIDO SEGMENTO b	
	BCF TRISD,1,0
	BCF LATD,1,0
	
     ;APAGADO SEGMENTO c
	BCF TRISD,2,0
	BSF LATD,2,0
	
     ;PRENDIDO SEGMENTO d
	BCF TRISD,3,0
	BCF LATD,3,0

     ;PRENDIDO SEGMENTO e
	BCF TRISD,4,0
	BCF LATD,4,0
	
     ;APAGADO SEGMENTO f
	BCF TRISD,5,0
	BSF LATD,5,0
	
     ;PRENDIDO SEGMENTO g
	BCF TRISD,6,0
	BCF LATD,6,0
	
     ;APAGADO SEGMENTO dp
	BCF TRISD,7,0
	BSF LATD,7,0
	BTFSS PORTA,3,1
	goto Letras_A_F
	
     ;RETARDOS
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	
//NUMERO 3
     ;PRENDIDO SEGMENTO a
	BCF TRISD,0,0
	BCF LATD,0,0
	
     ;PRENDIDO SEGMENTO b
	BCF TRISD,1,0
	BCF LATD,1,0

     ;PRENDIDO SEGMENTO c
	BCF TRISD,2,0
	BCF LATD,2,0
	
     ;PRENDIDO SEGMENTO d
	BCF TRISD,3,0
	BCF LATD,3,0

     ;APAGADO SEGMENTO e	
	BCF TRISD,4,0
	BSF LATD,4,0

     ;APAGADO SEGMENTO f
	BCF TRISD,5,0
	BSF LATD,5,0

     ;PRENDIDO SEGMENTO g
	BCF TRISD,6,0
	BCF LATD,6,0

     ;APAGADO SEGMENTO dp
	BCF TRISD,7,0
	BSF LATD,7,0
	BTFSS PORTA,3,1
	goto Letras_A_F
	
     ;RETARDOS	
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	
//NUMERO 4
     ;APAGADO SEGMENTO a
	BCF TRISD,0,0
	BSF LATD,0,0

     ;PRENDIDO SEGMENTO b
	BCF TRISD,1,0
	BCF LATD,1,0
    
     ;PRENDIDO SEGMENTO c
	BCF TRISD,2,0
	BCF LATD,2,0

     ;APAGADO SEGMENTO d
	BCF TRISD,3,0
	BSF LATD,3,0
     
     ;APAGADO SEGMENTO e
	BCF TRISD,4,0
	BSF LATD,4,0
	
     ;PRENDIDO SEGMENTO f
	BCF TRISD,5,0
	BCF LATD,5,0
	
     ;PRENDIDO SEGMENTO g
	BCF TRISD,6,0
	BCF LATD,6,0

     ;APAGADO SEGMENTO dp
	BCF TRISD,7,0
	BSF LATD,7,0
	BTFSS PORTA,3,1
	goto Letras_A_F
	
     ;RETARDOS
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	
//NUMERO 5
     ;PRENDIDO SEGMENTO a
	BCF TRISD,0,0
	BCF LATD,0,0
	
     ;APAGADO SEGMENTO b
	BCF TRISD,1,0
	BSF LATD,1,0
	
     ;PRENDIDO SEGMENTO c
	BCF TRISD,2,0
	BCF LATD,2,0

     ;APAGADO SEGMENTO d
	BCF TRISD,3,0
	BCF LATD,3,0

     ;APAGADO SEGMENTO e	
	BCF TRISD,4,0
	BSF LATD,4,0

     ;PRENDIDO SEGMENTO f
	BCF TRISD,5,0
	BCF LATD,5,0

     ;PRENDIDO SEGMENTO g	
	BCF TRISD,6,0
	BCF LATD,6,0

     ;APAGADO SEGMENTO dp	
	BCF TRISD,7,0
	BSF LATD,7,0
	BTFSS PORTA,3,1
	goto Letras_A_F
	
     ;RETADOS	
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
//NUMERO 6
     ;PRENDIDO SEGMENTO a	
	BCF TRISD,0,0
	BCF LATD,0,0
	
     ;APAGADO SEGMENTO b
	BCF TRISD,1,0
	BSF LATD,1,0
 	
     ;PRENDIDO SEGMENTO c
	BCF TRISD,2,0
	BCF LATD,2,0

     ;PRENDIDO SEGMENTO d	
	BCF TRISD,3,0
	BCF LATD,3,0

     ;PRENDIDO SEGMENTO e	
	BCF TRISD,4,0
	BCF LATD,4,0

     ;PRENDIDO SEGMENTO f	
	BCF TRISD,5,0
	BCF LATD,5,0

     ;PRENDIDO SEGMENTO g	
	BCF TRISD,6,0
	BCF LATD,6,0
	
     ;APAGADO SEGMENTO dp
	BCF TRISD,7,0
	BSF LATD,7,0
	BTFSS PORTA,3,1
	goto Letras_A_F
	
     ;RETADOS	
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1

//NUMERO 7
     ;PRENDIDO SEGMENTO a
	BCF TRISD,0,0
	BCF LATD,0,0

     ;PRENDIDO SEGMENTO b	
	BCF TRISD,1,0
	BCF LATD,1,0

     ;PRENDIDO SEGMENTO c	
	BCF TRISD,2,0
	BCF LATD,2,0

     ;APAGADO SEGMENTO d
	BCF TRISD,3,0
	BSF LATD,3,0

     ;APAGADO SEGMENTO e
	BCF TRISD,4,0
	BSF LATD,4,0
	
     ;APAGADO SEGMENTO f
	BCF TRISD,5,0
	BSF LATD,5,0

     ;APAGADO SEGMENTO g	
	BCF TRISD,6,0
	BSF LATD,6,0

     ;APAGADO SEGMENTO dp	
	BCF TRISD,7,0
	BSF LATD,7,0
	BTFSS PORTA,3,1
	goto Letras_A_F

     ;RETARDOS	
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	
//NUMERO 8
     ;PRENDIDO SEGMENTO a	
	BCF TRISD,0,0
	BCF LATD,0,0

     ;PRENDIDO SEGMENTO b	
	BCF TRISD,1,0
	BCF LATD,1,0

     ;PRENDIDO SEGMENTO c	
	BCF TRISD,2,0
	BCF LATD,2,0

     ;PRENDIDO SEGMENTO d	
	BCF TRISD,3,0
	BCF LATD,3,0

     ;PRENDIDO SEGMENTO e	
	BCF TRISD,4,0
	BCF LATD,4,0

     ;PRENDIDO SEGMENTO f	
	BCF TRISD,5,0
	BCF LATD,5,0

     ;PRENDIDO SEGMENTO g	
	BCF TRISD,6,0
	BCF LATD,6,0

     ;APAGADO SEGMENTO dp	
	BCF TRISD,7,0
	BSF LATD,7,0
	BTFSS PORTA,3,1
	goto Letras_A_F
  
     ;RETARDOS	
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1

//NUMERO 9
     ;PRENDIDO SEGMENTO a
	BCF TRISD,0,0
	BCF LATD,0,0

     ;PRENDIDO SEGMENTO b	
	BCF TRISD,1,0
	BCF LATD,1,0

     ;PRENDIDO SEGMENTO c	
	BCF TRISD,2,0
	BCF LATD,2,0
   
     ;APAGADO SEGMENTO d	
	BCF TRISD,3,0
	BSF LATD,3,0

     ;APAGADO SEGMENTO e	
	BCF TRISD,4,0
	BSF LATD,4,0

     ;PRENDIDO SEGMENTO f	
	BCF TRISD,5,0
	BCF LATD,5,0
 
     ;PRENDIDO SEGMENTO g	
	BCF TRISD,6,0
	BCF LATD,6,0

     ;APAGADO SEGMENTO dp	
	BCF TRISD,7,0
	BSF LATD,7,0
	BTFSS PORTA,3,1
	goto Letras_A_F
	
     ;RETARDOS 
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	goto Loop

Letras_A_F:
//LETRA A
     ;PRENDIDO SEGMENTO a
	BCF TRISD,0,0
	BCF LATD,0,0
	
     ;PRENDIDO SEGMENTO b
	BCF TRISD,1,0
	BCF LATD,1,0
	
     ;PRENDIDO SEGMENTO c 
	BCF TRISD,2,0
	BCF LATD,2,0

     ;APAGADO SEGMENTO d	
	BCF TRISD,3,0
	BSF LATD,3,0

     ;PRENDIDO SEGMENTO e	
	BCF TRISD,4,0
	BCF LATD,4,0

     ;PRENDIDO SEGMENTO f	
	BCF TRISD,5,0
	BCF LATD,5,0

     ;PRENDIDO SEGMENTO g	
	BCF TRISD,6,0
	BCF LATD,6,0
   
     ;APAGADO SEGMENTO dp	
	BCF TRISD,7,0
	BSF LATD,7,0
	BTFSC PORTA,3,1
	goto Numeros_0_9

     ;RETARDOS
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1

//LETRA B
     ;APAGADO SEGMENTO a
	BCF TRISD,0,0
	BSF LATD,0,0
	
     ;APAGADO SEGMENTO b
	BCF TRISD,1,0
	BSF LATD,1,0

     ;PRENDIDO SEGMENTO c
	BCF TRISD,2,0
	BCF LATD,2,0

     ;PRENDIDO SEGMENTO d
	BCF TRISD,3,0
	BCF LATD,3,0

     ;PRENDIDO SEGMENTO e
	BCF TRISD,4,0
	BCF LATD,4,0

     ;PRENDIDO SEGMENTO f	
	BCF TRISD,5,0
	BCF LATD,5,0

     ;PRENDIDO SEGMENTO g
	BCF TRISD,6,0
	BCF LATD,6,0

     ;APAGADO SEGMENTO dp
	BCF TRISD,7,0
	BSF LATD,7,0
	BTFSC PORTA,3,1
	goto Numeros_0_9
	
     ;RETARDOS
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	
//LETRA C
     ;PRENDIDO SEGMENTO a
	BCF TRISD,0,0
	BCF LATD,0,0
	
     ;APAGADO SEGMENTO b
	BCF TRISD,1,0
	BSF LATD,1,0
	
     ;APAGADO SEGMENTO c
	BCF TRISD,2,0
	BSF LATD,2,0
	
     ;PRENDIDO SEGMENTO d
	BCF TRISD,3,0
	BCF LATD,3,0
	
     ;PRENDIDO SEGMENTO e
	BCF TRISD,4,0
	BCF LATD,4,0
	
     ;PRENDIDO SEGMENTO f
	BCF TRISD,5,0
	BCF LATD,5,0

     ;APAGADO SEGMENTO g
	BCF TRISD,6,0
	BSF LATD,6,0

     ;APAGADO SEGMENTO dp	
	BCF TRISD,7,0
	BSF LATD,7,0
	BTFSC PORTA,3,1
	goto Numeros_0_9

     ;RETARDOS	
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1

//LETRA D
     ;APAGADO SEGMENTO a
	BCF TRISD,0,0
	BSF LATD,0,0
	
     ;PRENDIDO SEGMENTO b
	BCF TRISD,1,0
	BCF LATD,1,0

     ;PRENDIDO SEGMENTO c	
	BCF TRISD,2,0
	BCF LATD,2,0

     ;PRENDIDO SEGMENTO d	
	BCF TRISD,3,0
	BCF LATD,3,0

     ;PRENDIDO SEGMENTO e	
	BCF TRISD,4,0
	BCF LATD,4,0

     ;APAGADO SEGMENTO f	
	BCF TRISD,5,0
	BSF LATD,5,0

     ;PRENDIDO SEGMENTO g	
	BCF TRISD,6,0
	BCF LATD,6,0

     ;APAGADO SEGMENTO dp	
	BCF TRISD,7,0
	BSF LATD,7,0
	BTFSC PORTA,3,1
	goto Numeros_0_9

     ;RETARDOS	
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1

//LETRA E
     ;PRENDIDO SEGMENTO a	
	BCF TRISD,0,0
	BCF LATD,0,0

     ;APAGADO SEGMENTO b	
	BCF TRISD,1,0
	BSF LATD,1,0

     ;APAGADO SEGMENTO c	
	BSF TRISD,2,0
	BSF LATD,2,0

     ;PRENDIDO SEGMENTO d	
	BCF TRISD,3,0
	BCF LATD,3,0

     ;PRENDIDO SEGMENTO e	
	BCF TRISD,4,0
	BCF LATD,4,0

     ;PRENDIDO SEGMENTO f	
	BCF TRISD,5,0
	BCF LATD,5,0

     ;PRENDIDO SEGMENTO g	
	BCF TRISD,6,0
	BCF LATD,6,0

     ;APAGADO SEGMENTO dp	
	BCF TRISD,7,0
	BSF LATD,7,0
	BTFSC PORTA,3,1
	goto Numeros_0_9
	
     ;RETARDOS
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1

//LETRA F	
     ;PRENDIDO SEGMENTO a	
	BCF TRISD,0,0
	BCF LATD,0,0

     ;APAGADO SEGMENTO b	
	BCF TRISD,1,0
	BSF LATD,1,0
	
     ;APAGADO SEGMENTO c
	BCF TRISD,2,0
	BSF LATD,2,0

     ;PRENDIDO SEGMENTO d	
	BCF TRISD,3,0
	BSF LATD,3,0

     ;PRENDIDO SEGMENTO e	
	BCF TRISD,4,0
	BCF LATD,4,0

     ;PRENDIDO SEGMENTO f	
	BCF TRISD,5,0
	BCF LATD,5,0

     ;PRENDIDO SEGMENTO g	
	BCF TRISD,6,0
	BCF LATD,6,0

     ;APAGADO SEGMENTO dp	
	BCF TRISD,7,0
	BSF LATD,7,1
	BTFSC PORTA,3,1
	goto Numeros_0_9
	
     ;RETARDOS	
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	CALL Delay_250ms,1
	goto Loop
    
Pulsador:
    BANKSEL PORTA
    CLRF PORTA,1
    CLRF ANSELA,1
    BSF TRISA,3,1
    BSF LATA,3,1
    BSF WPUA,3,1
    RETURN
     
Config_OSC:
    BANKSEL OSCCON1
    MOVLW 0x60
    MOVWF OSCCON1,1
    MOVLW 0x02
    MOVWF OSCFRQ,1
    RETURN
    
    
Display:
    BANKSEL PORTD
    CLRF PORTD,0
    CLRF ANSELD,0
    RETURN
    
    END PROYECTO_2